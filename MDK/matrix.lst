C51 COMPILER V9.60.0.0   MATRIX                                                            01/08/2021 19:05:39 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MATRIX
OBJECT MODULE PLACED IN .\Out_File\matrix.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE ..\Device\matrix.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Device;..\Li
                    -braries;..\User) DEBUG OBJECTEXTEND PRINT(.\matrix.lst) OBJECT(.\Out_File\matrix.obj)

line level    source

   1          #include "hc595.h"
   2          #include "matrix.h"
   3          #include "delay.h"
   4          
   5          void matrix_init(void){
   6   1          hc595_enable_matrix();
   7   1      }
   8          
   9          // 单屏静态显示
  10          void matrix_display(uint8 index, uint8 *Str_begin, uint8 *Str_end){
  11   1          uint8 n = 15 - index;
  12   1          if(Str_end - Str_begin <= 8 - index){
  13   2              while(Str_begin < Str_end){
  14   3                  hc595_bit_select(n);                // hc595选列
  15   3                  MATRIX_ROW = *Str_begin;            // 点亮
  16   3                  delay1ms();                         // 维持1ms
  17   3                  hc595_bit_disable();                // 消影
  18   3                  n--;
  19   3                  Str_begin++;
  20   3              }
  21   2          }
  22   1      }
  23          
  24          // 动态显示
  25          void matrix_run(uint8 *Str, uint8 size_n, uint8 begin){
  26   1          uint8 n, t;
  27   1          for(n=15; n>=8; n--){
  28   2              hc595_bit_select(n);                        // hc595选列
  29   2              t = (begin + (15 - n)) % size_n;
  30   2              MATRIX_ROW = Str[t];                        // 点亮
  31   2              delay1ms();                                                 // 维持1ms
  32   2              hc595_bit_disable();                        // 消影
  33   2          }
  34   1      }
  35          
  36          //uint8 SKB[] = {
  37          //    0xff, 0xff, 0xd9, 0xb6, 0xb6, 0xcd, 0xff, 0xff,           // S
  38          //    0xff, 0xff, 0x80, 0xf7, 0xeb, 0xdd, 0xbe, 0xff,           // K
  39          //    0xff, 0xff, 0x80, 0xb6, 0xb6, 0xc9, 0xff, 0xff,           // B
  40          //    0xf3, 0xed, 0xdd, 0xbb, 0xbb, 0xdd, 0xed, 0xf3,           // 心
  41          //};
  42          // matrix_display(0, SKB+2*8, SKB+3*8);
  43          // matrix_run(SKB, sizeof(SKB), begin);


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    273    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----      15
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.

C51 COMPILER V9.60.0.0   MATRIX                                                            01/08/2021 19:05:39 PAGE 2   


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
